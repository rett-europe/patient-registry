<!DOCTYPE html>
<html>
<head>
    <title>Data Model</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <nav>
        <!-- Logo -->
        <a href="https://www.rettsyndrome.eu/">
            <img src="https://www.rettsyndrome.eu/wp-content/uploads/2020/01/cropped-cropped-LogoRSEshort.png" alt="Rett Syndrome Logo" class="logo">
        </a>
        <!-- Navigation Links -->
        <div class="nav-links">
            <a href="index.html">Return Home</a>
            <a href="about.html">About Us</a>
            <a href="contact.html">Contact</a>
        </div>
    </nav>
    <h1>Data Model</h1>

<p>With Auth0 handling user profile information, we will use a simplified <code>Contacts</code> entity in the data model by removing some fields and leveraging Auth0 for authentication and basic profile management.</p>

<h2>Adjusted Data Model</h2>

<h3>1. Auth0 Integration</h3>

<ul>
<li>User information like email, name, and mobile number will be stored in Auth0.</li>
<li>Auth0 will handle email verification, status, and other attributes related to authentication.</li>
</ul>

<h3>2. Contacts</h3>

<p>Stores additional information related to legal guardians, caregivers, or individuals who are responsible for patients, not managed by Auth0.<br />
 * Fields: <code>Contact_UUID</code>, <code>Auth0_User_ID</code>, <code>Country_Code</code>, <code>State_Code</code>, <code>Preferred_Language</code>, <code>Created_At</code>, <code>Last_Updated_At</code>, <code>Notes</code>.</p>

<h3>3. Patients</h3>

<p>Stores detailed information about the patient, including personal information, demographics, and clinical data.<br />
 * Fields: <code>Patient_UUID</code>, <code>Contact_UUID</code> (foreign key to Contacts), <code>National_ID</code>, <code>Full_Name</code>, <code>Date_of_Birth</code>, <code>Gender</code>, <code>Diagnosis_Date</code>, <code>MECP2_Mutation_Clinical_Diagnosis</code>, <code>Deceased</code>, <code>Death_Date</code>, <code>Created_At</code>, <code>Last_Updated_At</code>.<br />
 * Each patient is linked to a contact, who is their legal guardian or caregiver.</p>

<h3>4. Consent management</h3>

<p>Manages consent information related to data sharing, research participation, or other specific permissions for each patient.<br />
 * Fields: <code>Consent_ID</code>, <code>Contact_UUID</code> (foreign key to Contacts), <code>Patient_UUID</code> (foreign key to Patients), <code>Consent_Type</code>, <code>Consent_Status</code>, <code>Consent_Date</code>.<br />
 * This structure allows flexibility in managing multiple types of consent for each patient, such as data sharing or participation in specific studies.<br />
 * Consent records are linked to both the contact (legal guardian) and the patient, ensuring that each consent is clearly traceable to the responsible party.</p>

<h2>Data Model Diagram</h2>

<p><img src="./images/datamodel.png" alt="Data model" /></p>

<pre><code>erDiagram
    Contacts {
        UUID Contact_UUID PK "Primary identifier for the contact"
        string Auth0_User_ID "Reference to the Auth0 user profile"
        string Country_Code FK "Foreign key to Countries"
        string State_Code FK "Foreign key to States"
        string Preferred_Language
        timestamp Created_At "Record creation timestamp"
        timestamp Last_Updated_At "Record update timestamp"
        text Notes
    }

    Patients {
        UUID Patient_UUID PK "Primary identifier for the patient"
        UUID Contact_UUID FK "Foreign key to Contacts"
        string National_ID "National Identification Number - **Optional**"
        string Full_Name
        date Date_of_Birth
        string Gender
        date Diagnosis_Date
        string MECP2_Mutation_Clinical_Diagnosis
        boolean Deceased
        date Death_Date "Optional"
        timestamp Created_At
        timestamp Last_Updated_At
    }

    Consent {
        UUID Consent_ID PK "Primary identifier for consent record"
        UUID Contact_UUID FK "Foreign key to Contacts"
        UUID Patient_UUID FK "Foreign key to Patients"
        string Consent_Type "Type of consent"
        string Consent_Status "Consent status"
        timestamp Consent_Date "Consent date"
    }

    Countries {
        string Country_Code PK "Primary key for Country"
        string Country_Name
        string Region
    }

    States {
        string State_Code PK "Primary key for State"
        string State_Name
        string Country_Code FK "Foreign key to Countries"
    }

    Relationship_Types {
        int Relationship_Type_ID PK "Primary key for Relationship Type"
        string Relationship_Type_Name
    }

    Contacts ||--o{ Patients : "manages"
    Contacts }o--|| Countries : "located in"
    Contacts }o--|| States : "state located in"
    Patients ||--o{ Consent : "has"
    Contacts ||--o{ Consent : "gives"
    States }o--|| Countries : "belongs to"
</code></pre>

</body>
</html>
